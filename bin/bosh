#!/bin/bash

set -e
CWD="$(dirname "$(readlink -f "$0")")"
ROOT_DIR="$CWD/../../../../"

ACTION=$1

if [  "$ACTION" = "--help" ] || [  "$ACTION" = "-h" ] || [ -z "$ACTION" ]
then
   cat << EOF
See README.md


EOF
exit 1
fi

shift 1

if [ ! -e "$ROOT_DIR/config/bosh-config" ]
then

	if [ "$ACTION" == "install" ]
	then
		source "$CWD/install"
		exit 0
	else
		echo "please run bosh install"
		exit 1
	fi
fi

if [ "$ACTION" == "install-remote" ]
then
	source "$CWD/install-remote"
	exit 0
fi

if [ "$ACTION" == "deploy" ]
then
	source "$CWD/deploy"
	exit 0
fi

if [ "$ACTION" == "sync-db" ]
then
	source "$CWD/sync-db"
	exit 0
fi

if [ "$ACTION" == "sync-uploads" ]
then
	source "$CWD/sync-uploads"
	exit 0
fi

echo "Could not find script named $ACTION"
exit 1
